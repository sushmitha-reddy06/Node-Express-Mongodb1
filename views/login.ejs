<%- include('header') -%>

<div class="bg-2">
 <div class="text-center center-div" id="login">
    <div class="container w-25 border py-5">
      <div class="title pb-1">
      <% if (loginError) { %>
    <div class="alert alert-danger">
      <%= loginError %>
    </div>
  <% } %>
          <h2 class="font-weight-bold">Login Create</h2>
          <span>Login for the existing user</span>
          <% if(locals.logout){ %>
             <div class="alert alert-success text-center">
             Logged out Successfully..!
             </div>
          <% } %>
      </div>

      <form action="/login" method="POST" class="pt-3" onsubmit="return saveLoginData();">
        <div class="form-group" style="margin-top: 10px; margin-bottom: 10px;">
           <input type="email" class="form-control" placeholder="Email" name="email" id="email" required>
          <small class="form-text-muted text-left">Login User</small>
        </div>
         <div class="form-group" style="margin-top: 10px; margin-bottom: 10px;">
             <input type="password" class="form-control" name="password" placeholder="password" id="password" required>
         </div>
         <button type="submit" class="btn btn-success rounded-pill">Submit</button><br><br>
         <a href="/signup">Don't have an Account? Signup Now!</a>
     </form>

    </div>
  </div>
</div>

<script>
  function saveLoginData() {
    var email = document.getElementById("email").value;
    var password = document.getElementById("password").value;

    if (email === '' || password === '') {
      alert("Fill in all the details before submitting");
      return false;
    }

    var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    var passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/;

    if (!email.match(emailRegex)) {
      alert("Please enter a valid email.");
      return false;
    }

    if (password.length < 8 || !password.match(passwordRegex)) {
      alert("Password must contain at least one alphabet character, one number, one special character, and be at least 8 characters long.");
      return false;
    }

    return true;
  }
</script>

<%- include('footer') -%>
